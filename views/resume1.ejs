<%- include('includes/head.ejs') %>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.0.1/css/bootstrap.min.css"
    integrity="sha512-Ez0cGzNzHR1tYAv56860NLspgUGuQw16GiOOp/I2LuTmpSK9xDXlgJz3XN4cnpXWDmkNBKXR/VDMTCnAaEooxA=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.0.1/js/bootstrap.min.js"
    integrity="sha512-EKWWs1ZcA2ZY9lbLISPz8aGR2+L7JVYqBAYTq5AXgBkSjRSuQEGqWx8R1zAX16KdXPaCjOCaKE8MCpU0wcHlHA=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.js"></script>
    <!-- Updated html2pdf library -->
<script src="https://cdn.jsdelivr.net/npm/html2pdf.js@0.10.1/dist/html2pdf.bundle.js"></script>
<!-- Include html2pdf library -->
<script src="https://rawgit.com/eKoopmans/html2pdf/master/dist/html2pdf.bundle.js"></script>
  
  
<style>
  body {
    min-height: 100vh;
    background: linear-gradient(to right, #18191f, #395778);
    background-size: 400% auto;
    /* animation: gradientAnimation 15s ease infinite; */
    font-family: 'Lato', sans-serif;
    font-weight: 400;
    color: #222222;
    font-size: 14px;
    line-height: 30px;
    padding-bottom: 50px;
  }
  
  /* @keyframes gradientAnimation {
    0% {
      background-position: 0% 50%;
    }
    50% {
      background-position: 100% 50%;
    }
    100% {
      background-position: 0% 50%;
    }
  } */
  
  .container {
    max-width: 650px;
    background: #fff;
    margin: 0px auto;
    box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.3);
    border-radius: 3px;
    padding: 40px;
    margin-top: 50px;
    text-align: center;
  }
  

  .container * {
    text-align: left;
    /* Правило для дочерних элементов */
  }
  .container, .container-fluid, .container-lg, .container-md, .container-sm, .container-xl, .container-xxl{
    padding-right: 0px !important;
    padding-left: 0px !important;
  }

  
  .header {
    margin-bottom: 30px;
  }
  
  .header .full-name {
    font-size: 40px;
    text-transform: uppercase;
    margin-bottom: 5px;
  }
  
  .header .first-name {
    font-weight: 700;
  }
  
  .header .last-name {
    font-weight: 300;
  }
  
  .header .contact-info {
    margin-bottom: 20px;
  }
  
  .header .email,
  .header .phone {
    color: #e41e49;
    font-weight: 300;
  }
  
  .header .separator {
    height: 10px;
    display: inline-block;
    border-left: 2px solid #494732;
    margin: 0px 10px;
  }
  
  .header .position {
    font-weight: bold;
    display: inline-block;
    margin-right: 10px;
    text-decoration: underline;
  }
  
  .details {
    /* line-height: 20px; */
  }
  
  .details .section {
    margin-bottom: 40px;
  }
  
  .details .section:last-of-type {
    margin-bottom: 0px;
  }
  
  .details .section__title {
    letter-spacing: 2px;
    color: #e41e49;
    font-weight: bold;
    margin-bottom: 10px;
    text-transform: uppercase;
  }
  
  .details .section__list-item {
    margin-bottom: 40px;
  }
  
  .details .section__list-item:last-of-type {
    margin-bottom: 0;
  }
  
  .details .left,
  .details .right {
    vertical-align: top;
    display: inline-block;
  }
  
  .details .left {
    width: 60%;
  }
  
  .details .right {
    text-align: right;
    width: 39%;
  }
  
  .details .name {
    font-weight: bold;
  }
  
  .details a {
    text-decoration: none;
    color: #000;
    font-style: italic;
  }
  
  .details a:hover {
    text-decoration: underline;
    color: #000;
  }
  
  .details .skills {
     
  }
  
  .details .skills__item {
    margin-bottom: 10px;
  }
  
  .details .skills__item .right input {
    display: none;
  }
  
  .details .skills__item .right label {
    display: inline-block;
    width: 20px;
    height: 20px;
    background: #C3DEF3;
    border-radius: 20px;
    margin-right: 3px;
  }
  
  .details .skills__item .right input:checked + label {
    background: #79A9CE;
  }
  
  .phone-hidden {
    display: none;
  }
  
  .last-name {
    color: #333333;
  }
    </style>
<body>
  <div class="container-scroller">
    <%- include('includes/navbar.ejs') %>
    <div class="container-fluid page-body-wrapper">
      <%- include('includes/sidebar.ejs') %>
      <div class="main-panel">
        <div class="content-wrapper">
          <div class="row">
            <div class="col-md-12 grid-margin">
              <div class="row">
                <div class="col-lg-7 col-xl-8 mb-4 mb-xl-0">
                  <h3 class="font-weight-bold">Resume Template</h3>
                  <h6 class="font-weight-normal mb-0">Unlock Your Potential with Upreak and Elevating Recruitment through Dashboards!</h6><br>
                </div>
                <div class="col-lg-4" >
                  <a href="/view_details" class="ml-1 btn btn-primary" style="float:right">View Data</a>
                  <button id="generate_pdf_btn" type="button" class="btn btn-primary me-1 ms-1"  style="float:right">Download </button>
                
               </div>
              </div>
              <div class="d-flex justify-content-center">
                <div class="card shadow main p-4" id="resume_div" style="width: 8.27in; height: 11.68in;">
          
                  <div class="row">
                    <div class="col-lg-3">
                      <img width="80%" src="/uploads/<%- typeof locals != 'undefined' ? locals.upload_photo : '' %>">
                    </div>
                    <div class="col-lg-9">
                      <div class="header">
                        <div class="full-name mt-4">
                          <span class="first-name"><%- typeof locals != 'undefined' ? locals.name : '' %></span>
                          <!-- <span class="last-name">Kening</span> -->
                        </div>
                        <div class="contact-info">
                          <span class="email">Phone: </span>
                          <span class="email-val"><%- typeof locals != 'undefined' ? locals.phonenumber : '' %></span>
                          <span class="separator"></span>
                          <span class="email">Email: </span>
                          <span class="email-val"><%- typeof locals != 'undefined' ? locals.emailid : '' %></span>  
                        </div>
                        
                      </div>
                    </div>
                  </div>
                  <br>
                  <div class="details">
                    <div class="section">
                      <div class="row">                      
                        <div class="col-lg-6 col-md-6 col-sm-6" style="float:left">
                          <div class="col-lg-12" style="float:left">
                            <div class="section__title">Education</div>
                          <div class="section__list">
                            <div class="section__list-item">
                              <div class="text-justify">
                                <div class="name"><%- typeof locals != 'undefined' ? locals.pgqualification : '' %></div>
                                <div class="duration"><%- typeof locals != 'undefined' ? locals.pgcollege : '' %></div>
                                <div class="addr"><%- typeof locals != 'undefined' ? locals.pguniversity : '' %></div>
                                <!-- <div class="duration"><%- typeof locals != 'undefined' ? locals.pgtype : '' %></div> -->
                                <!-- <div class="duration"><%- typeof locals != 'undefined' ? locals.pgpercent : '' %></div> -->
                                <div class="duration"><%- typeof locals != 'undefined' ? locals.pgyos : '' %><%- typeof locals != 'undefined' ? locals.pgyoc : '' %></div>
                                <!-- <div class="duration"><%- typeof locals != 'undefined' ? locals.pgstate : '' %></div> -->
                              </div>
                              <div class="text-justify">
                                <div class="name"><%- typeof locals != 'undefined' ? locals.ugqualification : '' %></div>
                                <div class="duration"><%- typeof locals != 'undefined' ? locals.ugcollege : '' %></div>
                                <div class="addr"><%- typeof locals != 'undefined' ? locals.uguniversity : '' %></div>
                                <!-- <div class="duration"><%- typeof locals != 'undefined' ? locals.ugtype : '' %></div> -->
                                <!-- <div class="duration"><%- typeof locals != 'undefined' ? locals.ugpercent : '' %></div> -->
                                <div class="duration"><%- typeof locals != 'undefined' ? locals.ugyos : '' %>  <%- typeof locals != 'undefined' ? locals.ugyoc : '' %></div>
                                <!-- <div class="duration"><%- typeof locals != 'undefined' ? locals.ugstate : '' %></div> -->
                              </div>
                              <div class="text-justify">
                                <div class="name"><%- typeof locals != 'undefined' ? locals.qualification_diploma : '' %></div>
                                <div class="duration"><%- typeof locals != 'undefined' ? locals.college_diploma : '' %></div>
                                <div class="addr"><%- typeof locals != 'undefined' ? locals.university_diploma : '' %></div>
                                <!-- <div class="duration"><%- typeof locals != 'undefined' ? locals.ctype_diploma : '' %></div> -->
                                <!-- <div class="duration"><%- typeof locals != 'undefined' ? locals.percent_diploma : '' %></div> -->
                                <div class="duration"><%- typeof locals != 'undefined' ? locals.yos_diploma : '' %>  <%- typeof locals != 'undefined' ? locals.yoc_diploma : '' %></div>
                                <!-- <div class="duration"><%- typeof locals != 'undefined' ? locals.state_diploma : '' %></div> -->
                              </div>
                              <div class="text-justify">
                                <div class="name">Intermediate School</div>
                                <div class="duration"><%- typeof locals != 'undefined' ? locals.college_12 : '' %></div>
                            <div class="addr"><%- typeof locals != 'undefined' ? locals.university_12 : '' %></div>
                            <!-- <div class="duration"><%- typeof locals != 'undefined' ? locals.ctype_12 : '' %></div> -->
                            <!-- <div class="duration"><%- typeof locals != 'undefined' ? locals.percent_12 : '' %></div> -->
                            <div class="duration"><%- typeof locals != 'undefined' ? locals.yos_12 : '' %>  <%- typeof locals != 'undefined' ? locals.yoc_12 : '' %></div>
                            <!-- <div class="duration"><%- typeof locals != 'undefined' ? locals.state_12 : '' %></div> -->
                              </div>
                              <div class="text-justify">
                                <div class="name">High School</div>
                                <div class="duration"><%- typeof locals != 'undefined' ? locals.college_10 : '' %></div>
                                <div class="addr"><%- typeof locals != 'undefined' ? locals.university_10 : '' %></div>
                                <!-- <div class="duration"><%- typeof locals != 'undefined' ? locals.ctype_10 : '' %></div> -->
                                <!-- <div class="duration"><%- typeof locals != 'undefined' ? locals.percent_10 : '' %></div> -->
                                <div class="duration"><%- typeof locals != 'undefined' ? locals.yos_10 : '' %>  <%- typeof locals != 'undefined' ? locals.yoc_10 : '' %></div>
                                <!-- <div class="duration"><%- typeof locals != 'undefined' ? locals.state_10 : '' %></div> -->
                              </div>
                            </div>
                          </div>
                        
                          </div><br>
                          <div class="col-lg-12" style="float:left">
                           
                          </div>
                        </div><br>
                        <div class="col-lg-6 col-md-6 col-sm-6" style="float:right">
                         <div class="col-lg-12">
                          <div class="section">
                            <div class="section__title">Skills</div>
                            <div class="section__list">
                              <div class="section__list-item" >
                                <div class="">
                                  <a class=" font-weight-bold" ><%- typeof locals != 'undefined' ? locals.skill1 : '' %></a>,
                                  <a class=" font-weight-bold" ><%- typeof locals != 'undefined' ? locals.skill2 : '' %></a>,
                                  <a class=" font-weight-bold" ><%- typeof locals != 'undefined' ? locals.skill3 : '' %></a>,
                                  <a class=" font-weight-bold" ><%- typeof locals != 'undefined' ? locals.skill4 : '' %></a>,
                                  <a class=" font-weight-bold" ><%- typeof locals != 'undefined' ? locals.skill5 : '' %></a>
                                </div>
                              </div>
                            </div>
                          </div>
                         </div><br>
                         <div class="col-lg-12">
                          <div class="section">
                            <div class="section__title">Language</div>
                            <div class="section__list">
                              <div class="section__list-item" >
                                <div class="">
                                  <span class=" font-weight-bold"><%- typeof locals != 'undefined' ? locals.languages : '' %></span>
                                </div>
                              </div>
                            </div>
                          </div>
                         </div><br>
                         <div class="col-lg-12">
                          <div class="section">
                            <div class="section__title">Experience</div>
                            <div class="section__list">
                              <div class="section__list">
                                <div class="section__list-item">
                                  <div class="text-justify">
                                    <!-- <div class="name"><%- typeof locals != 'undefined' ? locals.exp_seeker_type : '' %></div> -->
                                    <div class="addr font-weight-bold"><%- typeof locals != 'undefined' ? locals.company_project_name : '' %></div>
                                    <!-- <div class="duration"><%- typeof locals != 'undefined' ? locals.project_role_name : '' %></div> -->
                                    <div class="duration"><%- typeof locals != 'undefined' ? locals.position: '' %></div>
                                    <div class="duration"><%- typeof locals != 'undefined' ? locals.exp_sdate : '' %> - <%- typeof locals != 'undefined' ? locals.exp_edate: '' %></div>
                                    <div class="duration"><%- typeof locals != 'undefined' ? locals.experience+" yrs" : '' %></div>
      
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                         </div>
                        </div>
                      </div>                  
                  </div>
                </div>
              </div>
            </div>
        </div>
        <%- include('includes/footer.ejs') %>
      </div>
    </div>
  </div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.8.0/gsap.min.js"></script>
  <script>
  const firstName = document.querySelector(".first-name");
  
  firstName.addEventListener("mouseenter", () => {
    firstName.style.color = "red";
  });
  
  firstName.addEventListener("mouseleave", () => {
    firstName.style.color = "initial";
  });
  
  gsap.from(".container", { duration: 1, opacity: 0, y: -50 });
  gsap.from(".header", { duration: 1, opacity: 0, y: -50, delay: 0.5 });
  gsap.from(".section", { duration: 1, opacity: 0, y: -50, stagger: 0.2, delay: 1 });
  
    </script>

    <script>
      // Wrap your code inside window.onload to ensure it runs after the page has fully loaded
      window.onload = function () {
        // Variable to track whether the content is fully loaded
        let isContentLoaded = false;
    
        // Function to check if content is fully loaded
        function checkContentLoaded() {
          // Add your logic to determine if the content is fully loaded
          // For example, check if specific elements are present or loaded
    
          // For demonstration purposes, let's assume the content is fully loaded after 2 seconds
          setTimeout(function () {
            isContentLoaded = true;
    
            // Enable the download button
            enableDownloadButton();
          }, 5000);
        }
    
        // Enable the download button if the content is fully loaded
        function enableDownloadButton() {
          const downloadButton = document.getElementById("generate_pdf_btn");
    
          if (isContentLoaded) {
            // Content is fully loaded, enable the download button
            downloadButton.disabled = false;
          } else {
            // Content is not fully loaded, disable the download button
            downloadButton.disabled = true;
          }
        }
    
        // Check if content is fully loaded when the page is ready
        checkContentLoaded();
    
        // Attach a click event listener to the download button
        document.getElementById("generate_pdf_btn").addEventListener('click', function () {
          // Check if the content is fully loaded before allowing the user to download
          if (isContentLoaded) {
            const element = document.getElementById('resume_div');
            let cname = `<%- typeof locals != 'undefined' ? locals.name : '' %>`;
            cname = cname.replace(/ /g, '_');
            // Ensure dynamic content is fully rendered before generating PDF
            html2pdf(element, {
              filename: `${cname}_Resume.pdf`, // Specify the desired filename here
              jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' },
              output: function (pdf) {
                // Save the PDF using the FileSaver.js library
                pdf.save();
              }
            });
          } else {
            // Show an alert or provide feedback that the content is still loading
            alert("Please wait for the content to fully load before downloading.");
          }
        });
      };
    </script>
    
</body>


